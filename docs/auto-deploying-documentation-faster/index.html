<!DOCTYPE html>
<html lang="en-gb">
    <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="Hugo 0.25.1" />
    <title>Auto-deploying documentation: FASTER!</title>
    
    
    
    <meta name="description" content="A description that will appear as a default if front matter does not exist" />
    <meta name="keywords" content='auto deploying r documentation,best practices,continuous integration,git,knitr,r,rmarkdown,software development in r,travis-ci' />
    
        <meta name="author" content="Steph" />
    
    
    <link href="" rel="alternate" type="application/rss+xml" title="Locke Data Blog" />
    <link rel="stylesheet" href="http://lockelife.com/blog/css/bootstrap.min.css" />
    <link rel="stylesheet" href="http://lockelife.com/blog/css/highlightjs-themes/androidstudio.css" />
    <link rel="stylesheet" href="http://lockelife.com/blog/css/font-awesome.min.css" />
    <link rel="stylesheet" href="http://lockelife.com/blog/css/lockedata.css" />
    
        
            <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
            <script>
                (adsbygoogle = window.adsbygoogle || []).push({
                    google_ad_client: "ca-pub-XXXXXX",
                    enable_page_level_ads: true
                });
            </script>
        
    
</head>

    <body>
        <!-- Navigation -->
<nav class="navbar navbar-default navbar-fixed-top">
  <div class="container">

    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header page-scroll">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
        <span class="sr-only"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      
        <a class="navbar-brand page-scroll" href="/blog/#page-top">
          
          <img src="http://lockelife.com/blog/img/LockeDataTextNew.svg" class="img-responsive" alt="">
        </a>
      

    </div>
    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav navbar-right">
        <li class="hidden">
          <a href="/blog/#page-top"></a>
        </li>
        
          <li>
            <a href="http://lockelife.com">Locke Data</a>
          </li>
        
          <li>
            <a href="/blog/blog/">Blog</a>
          </li>
        

        
        
      </ul>
    </div>
    <!-- /.navbar-collapse -->
  </div>
  <!-- /.container-fluid -->
</nav>

        <div id="top" class="container">
            <div class="row" id="content-main">
                    <div class="row">
    <div class="col-md-12 content-card">
        <h1>Auto-deploying documentation: FASTER!</h1>
        
            
            <ul class="list-inline meta">
                <li><i class="fa fa-calendar"></i>November 13, 2015</li>
                <li><i class="fa fa-user"></i>Steph</li>
                
                    
                    <li><i class="fa fa-folder"></i><a href="http://lockelife.com/categories/data-science">Data Science</a>, <a href="http://lockelife.com/categories/dataops">DataOps</a>, <a href="http://lockelife.com/categories/r">R</a></li>
                
            </ul>
        
        
    <ul class="list-inline tags" style="margin-top: 15px; margin-left: 0px">
        
            <li style=""><a href="http://lockelife.com/tags/auto-deploying-r-documentation">auto deploying r documentation</a></li>
        
            <li style=""><a href="http://lockelife.com/tags/best-practices">best practices</a></li>
        
            <li style=""><a href="http://lockelife.com/tags/continuous-integration">continuous integration</a></li>
        
            <li style=""><a href="http://lockelife.com/tags/git">git</a></li>
        
            <li style=""><a href="http://lockelife.com/tags/knitr">knitr</a></li>
        
            <li style=""><a href="http://lockelife.com/tags/r">r</a></li>
        
            <li style=""><a href="http://lockelife.com/tags/rmarkdown">rmarkdown</a></li>
        
            <li style=""><a href="http://lockelife.com/tags/software-development-in-r">software development in r</a></li>
        
            <li style=""><a href="http://lockelife.com/tags/travis-ci">travis-ci</a></li>
        
    </ul>


        <p>Over the past few years I&#8217;ve been delving deeper into automatically building and deploying documentation and reporting in R (with rmarkdown, LaTeX etc). This post covers another step forward on that journey towards awesomeness.</p>

<p></p>

<hr />

<h3 id="posts-in-this-series">Posts in this series</h3>

<ol>
<li><a href="https://itsalocke.com/automated-documentation-hosting-on-github-via-travis-ci/">Automated documentation hosting on github via Travis-CI</a></li>
<li><a href="https://itsalocke.com/auto-deploying-documentation-multiple-r-vignettes/">Auto-deploying documentation: multiple R vignettes</a></li>
<li><a href="https://itsalocke.com/auto-deploying-documentation-faster/">Auto-deploying documentation: FASTER!</a></li>
<li><a href="https://itsalocke.com/auto-deploying-documentation-rtraining/">Auto-deploying documentation: Rtraining</a></li>
<li><a href="https://itsalocke.com/auto-deploying-documentation-better-change-tracking-artefacts/">Auto-deploying documentation: better change tracking of artefacts</a></li>
</ol>

<hr />

<p>I wrote a while back about how <a href="https://twitter.com/rmflight">Robert Flight</a>&#8216;s post helped me <a href="https://itsalocke.com/automated-documentation-hosting-on-github-via-travis-ci/">make web pages out of my R package vignette</a> <em>automatically</em> whenever I committed a change to GitHub. I took it further by modifying to <a href="https://itsalocke.com/auto-deploying-documentation-multiple-r-vignettes/">loop through vignettes</a>.</p>

<p>I then promised to do one thing: make a much more complex version. Well, that&#8217;s taken me a while and you can check it out in its <a href="https://github.com/stephlocke/Rtraining">current guise for Rtraining</a> but it&#8217;s still not as clean I&#8217;d like because of my pants coding on some of the Rmarkdown docs. Whilst I can&#8217;t blog about a neat solution for that (yet), I wanted to cover the neat, but most importantly fast, solution I was able to crib from <a href="http://kieranhealy.org/">Kieran Healy</a> on using <a href="http://kieranhealy.org/blog/archives/2015/10/16/using-containerized-travis-ci-to-check-r-in-rmarkdown-files/">containerized R builds</a> and how this makes things go whizzy fast!</p>

<p>Part of the big problem I&#8217;ve had when doing my Rtraining auto-doc process has been the amount of time it takes to build my R environment from scratch before generating the documents. When your build takes more than 15 minutes you find other things to do with the intervening time and end up completely forgetting about it.</p>

<h2 id="how-do-you-solve-that-full-build-issue">How do you solve that full-build issue?</h2>

<p>Unfortunately, a long build time is a typical state of affairs with the <a href="http://docs.travis-ci.com/user/languages/r/">R Travic-CI</a> builds at the moment because they require elevated permissions and run on VMs. Travis have been using containers from <a href="https://www.docker.com/">docker</a> to do much cooler stuff. By using containers they have less initial setup that needs doing so your build starts quicker, then you can set up some caching of dependencies so that it keeps all your installed stuff lying around ready for use when you commit things. This means that unless a dependency has changed e.g. new version, or no longer required, the cache is still valid and can be used. Overall, between the two pieces it means time is spent on testing your stuff, and less time is spent on the prep for testing.</p>

<p>This can literally take 10-15 minutes off your build time &#8211; woohoo!</p>

<h2 id="why-isn-8217-t-everyone-doing-it">Why isn&#8217;t everyone doing it?</h2>

<p>Well, it is pretty new and R support has only just gone into travis generally. There&#8217;s also some permissions issues that go away with <code>sudo</code>. At the moment, the <a href="https://github.com/jtilly/R-travis-container-example">example container R build</a> that Jan Tilly built is still pretty bare bones and isn&#8217;t as easy out of the box as the mainstream version.</p>

<h2 id="move-on-to-the-cool-stuff-already">Move on to the cool stuff already!</h2>

<p>When I needed to do an <a href="https://github.com/stephlocke/isc-proposal">rmarkdown repository</a> for making <a href="https://www.r-consortium.org/about/isc/proposals">R Consortium Infrastructure Proposals</a>, I was able to take the opportunity to take Jan&#8217;s code and move forward with it so that the ISC proposal is always web-facing. Here&#8217;s how I did it:</p>

<ul>
<li>Used @jtilly&#8217;s <a href="https://github.com/jtilly/R-travis-container-example/blob/master/.travis.yml">.travis.yml</a> file as the backbone</li>
<li>Emulated @yihui&#8217;s <a href="https://github.com/yihui/knitr/blob/master/.travis.yml">knitr .travis.yml</a> file in order to get recent versions of pandoc and texlive for rmarkdown to work correctly</li>
<li>Used a shell script for sorting out git commits, and my R file for generating the Rmarkdown docs</li>
</ul>

<h3 id="what-next">What next?</h3>

<p>Take a look at the key components (below) or have a play &#8211; take the <a href="https://github.com/stephlocke/isc-proposal">proposal boilerplate</a> and follow the instructions on configuring it to work on your account. Try adding new docs or dependencies, or add a package infrastructure &#8211; in other words hack away! Most importantly though, smile at jobs that take just a minute ðŸ˜€</p>

<h3 id="the-r-code">The R code</h3>

<pre><code>[embedGitHubContent owner=&quot;stephlocke&quot; repo=&quot;isc-proposal&quot; path=&quot;ghgenerate.R&quot;]
</code></pre>

<h3 id="the-bash-code">The bash code</h3>

<pre><code>[embedGitHubContent owner=&quot;stephlocke&quot; repo=&quot;isc-proposal&quot; path=&quot;.push_gh_pages.sh&quot;]
</code></pre>

<h3 id="the-travis-yaml">The travis yaml</h3>

<pre><code>[embedGitHubContent owner=&quot;stephlocke&quot; repo=&quot;isc-proposal&quot; path=&quot;.travis.yml&quot;]
</code></pre>
		</div>
		
</div>
    <div class="row">
    <div class="col-md-12 card">
        <h5>Search</h5>
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form">
            <div class="input-group">
                <input class="form-control" type="search" name="q" />
                <span class="input-group-btn">
                    <button class="btn btn-primary" type="submit"><span class="glyphicon glyphicon-search"></span></button>
                </span>
            </div>
            <input type="hidden" name="q" value="site:http://lockelife.com/blog/">
        </form>
    </div>
</div>

<div class="row">
		  <div class="col-md-12 content-card">
        
    <ul class="list-inline share" style="margin-top: 15px; margin-left: 0px">
        <li class="facebook-share"><a target="_blank" href="http://www.facebook.com/sharer.php?u=http%3a%2f%2flockelife.com%2fblog%2fauto-deploying-documentation-faster%2f"><i class="fa fa-facebook fa-lg"></i>Facebook</a></li>
        <li class="googleplus-share"><a target="_blank" href="https://plus.google.com/share?url=http%3a%2f%2flockelife.com%2fblog%2fauto-deploying-documentation-faster%2f"><i class="fa fa-google-plus fa-lg"></i>Google+</a></li>
        <li class="twitter-share"><a target="_blank" href="https://twitter.com/share?url=http%3a%2f%2flockelife.com%2fblog%2fauto-deploying-documentation-faster%2f&amp;text=Auto-deploying%20documentation%3a%20FASTER%21"><i class="fa fa-twitter fa-lg"></i>Twitter</a></li>
        <li class="reddit-share"><a target="_blank" href="http://reddit.com/submit?url=http%3a%2f%2flockelife.com%2fblog%2fauto-deploying-documentation-faster%2f&amp;title=Auto-deploying%20documentation%3a%20FASTER%21"><i class="fa fa-reddit fa-lg"></i>Reddit</a></li>
        <li class="linkedin-share"><a target="_blank" href="http://www.linkedin.com/shareArticle?mini=true&url=http%3a%2f%2flockelife.com%2fblog%2fauto-deploying-documentation-faster%2f"><i class="fa fa-linkedin fa-lg"></i>LinkedIn</a></li>
        <li class="stumbleupon-share"><a target="_blank" href="http://www.stumbleupon.com/submit?url=http%3a%2f%2flockelife.com%2fblog%2fauto-deploying-documentation-faster%2f&amp;title=Auto-deploying%20documentation%3a%20FASTER%21"><i class="fa fa-stumbleupon fa-lg"></i>StumbleUpon</a></li>
    </ul>


    </div>
	</div>

                    
    
        <div class="row">
            <div class="col-md-12 content-card">
                <div id="disqus_thread"></div>
                <script>
                    (function() {
                        if (window.location.hostname == "localhost") {
                            document.write("Disqus comments are unavailable while serving on localhost or 127.0.0.1");
                            return;
                        }
                        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                        var disqus_shortname = 'shortname';
                        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                    })();
                </script>
                <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
            </div>
        </div>
    


            </div>
        </div>
        <!-- Footer section -->
<footer>
  <div class="container">
    <div class="row">
      <div class="col-md-4">
        <span class="copyright">
          <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png" /></a><br />This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License</a>.
        </span>
      </div>
      <div class="col-md-4">
        <ul class="list-inline social-buttons">
          
            <li>
              <a href="/blog/#"><i class='fa fa-twitter'></i></a>
            </li>
          
            <li>
              <a href="/blog/#"><i class='fa fa-facebook'></i></a>
            </li>
          
            <li>
              <a href="/blog/#"><i class='fa fa-linkedin'></i></a>
            </li>
          
        </ul>
      </div>
      <div class="col-md-4">
        <ul class="list-inline quicklinks">
          
            <li>
              <a href="http://lockelife.com/#company">Legalise and stuff</a>
            </li>
          
        </ul>
      </div>
    </div>
  </div>
</footer>

        <div id="back-to-top" class="hidden">
    <a href="#top" class="well well-sm" onclick="$('html,body').animate({scrollTop:0},'slow');return false;">
        <i class="glyphicon glyphicon-chevron-up"></i> Back to Top
    </a>
</div>
<script src="http://lockelife.com/blog/js/jquery.min.js"></script>
<script src="http://lockelife.com/blog/js/bootstrap.min.js"></script>
<script src="http://lockelife.com/blog/js/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<script>
    if(($(window).height() + 100) < $(document).height()) {
        $('#back-to-top').removeClass('hidden').affix({
            offset: {
                top: 100
            }
        });
    }
</script>

    
        <script>
            
            [].forEach.call(document.querySelectorAll('.adsbygoogle'), function() {
                (adsbygoogle = window.adsbygoogle || []).push({});
            });
        </script>
    


    
    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-XXXXX-YY', 'auto');
        ga('send', 'pageview');
    </script>




    </body>
</html>
