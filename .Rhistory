library(profvis)
library(XML)
library(xml2)
library(plyr)
library(tidyverse)
library(reshape2)
library(foreign)
library(rio)
df             <- data.frame()
transposed.df1 <- data.frame()
allxmldata     <- data.frame()
inputfiles <- as.character('test.xml')
findchildren<-function(nodes, df) {
numchild <- sapply(nodes, function(x){length(xml_children(x))})
xmlvalue <- xml_text(nodes[numchild==0])
xmlname  <- xml_name(nodes[numchild==0])
xmlpath  <- sapply(nodes[numchild==0], function(x) {gsub(', ','_', toString(rev(xml_name(xml_parents(x)))))})
fieldname <- paste(xmlpath,xmlname,sep = '_')
contents <- sapply(xmlvalue, function(f){is.na(f)<-which(f == '');f})
if (fieldname == 'MyDecision_Decision_DecisionReasons_Reason_Description') {
fieldname <- paste(fieldname,xmlvalue, sep = '_')
} else {fieldname}
dftemp <- data.frame(fieldname, contents)
df       <- rbind(df, dftemp)
print(dim(df))
if (sum(numchild)>0){
findchildren(xml_children(nodes[numchild>0]), df) }
else{ return(df)}
}
#debug(findchildren)
for (x in inputfiles) {
df1     <- findchildren(xml_children(read_xml(x)),df)
xml.df1 <- data.frame(spread(df1, key = fieldname, value = contents), fix.empty.names = TRUE)
allxmldata <- rbind.fill(allxmldata,xml.df1)
}
setwd("~")
library(profvis)
library(XML)
library(xml2)
library(plyr)
library(tidyverse)
library(reshape2)
library(foreign)
library(rio)
df             <- data.frame()
transposed.df1 <- data.frame()
allxmldata     <- data.frame()
inputfiles <- as.character('test.xml')
findchildren<-function(nodes, df) {
numchild <- sapply(nodes, function(x){length(xml_children(x))})
xmlvalue <- xml_text(nodes[numchild==0])
xmlname  <- xml_name(nodes[numchild==0])
xmlpath  <- sapply(nodes[numchild==0], function(x) {gsub(', ','_', toString(rev(xml_name(xml_parents(x)))))})
fieldname <- paste(xmlpath,xmlname,sep = '_')
contents <- sapply(xmlvalue, function(f){is.na(f)<-which(f == '');f})
if (fieldname == 'MyDecision_Decision_DecisionReasons_Reason_Description') {
fieldname <- paste(fieldname,xmlvalue, sep = '_')
} else {fieldname}
dftemp <- data.frame(fieldname, contents)
df       <- rbind(df, dftemp)
print(dim(df))
if (sum(numchild)>0){
findchildren(xml_children(nodes[numchild>0]), df) }
else{ return(df)}
}
#debug(findchildren)
for (x in inputfiles) {
df1     <- findchildren(xml_children(read_xml(x)),df)
xml.df1 <- data.frame(spread(df1, key = fieldname, value = contents), fix.empty.names = TRUE)
allxmldata <- rbind.fill(allxmldata,xml.df1)
}
inputfiles
df1     <- findchildren(xml_children(read_xml(x)),df)
xml.df1 <- data.frame(spread(df1, key = fieldname, value = contents), fix.empty.names = TRUE)
x
df1     <- findchildren(xml_children(read_xml(x)),df)
library(profvis)
library(XML)
library(xml2)
library(plyr)
library(tidyverse)
library(reshape2)
library(foreign)
library(rio)
df             <- data.frame()
transposed.df1 <- data.frame()
allxmldata     <- data.frame()
inputfiles <- as.character('test.xml')
findchildren<-function(nodes, df) {
numchild <- sapply(nodes, function(x){length(xml_children(x))})
xmlvalue <- xml_text(nodes[numchild==0])
xmlname  <- xml_name(nodes[numchild==0])
xmlpath  <- sapply(nodes[numchild==0], function(x) {gsub(', ','_', toString(rev(xml_name(xml_parents(x)))))})
fieldname <- paste(xmlpath,xmlname,sep = '_')
contents <- sapply(xmlvalue, function(f){is.na(f)<-which(f == '');f})
if (fieldname == 'MyDecision_Decision_DecisionReasons_Reason_Description') {
fieldname <- paste(fieldname,xmlvalue, sep = '_')
} else {fieldname}
dftemp <- data.frame(fieldname, contents)
df       <- rbind(df, dftemp)
print(dim(df))
if (sum(numchild)>0){
findchildren(xml_children(nodes[numchild>0]), df) }
else{ return(df)}
}
#debug(findchildren)
for (x in inputfiles) {
df1     <- findchildren(xml_children(read_xml(x)),df)
xml.df1 <- data.frame(spread(df1, key = fieldname, value = contents), fix.empty.names = TRUE)
allxmldata <- rbind.fill(allxmldata,xml.df1)
}
read_xml(x)
xml_children(read_xml(x))
xml_children(xml_children(read_xml(x)))
library(twitteR)
setup_twitter_oauth("PMtCtjIYhNANGH1wYMJqyNjML",
"ZIk8hwompPXKVpwkXRbuicPIcZ17EWXpDIkPTtY3KOasc7C43m",        "1420994827-NzBCNdLj6q4YoiDnD7DxZVYniJd3E3BwhoxNzKk",
"46O1yAkEMIGRYDMxhAcugfJFqyi0FGy24HCQoBY8QV2UG")
ld<-twitteR::getUser("lockedata")
followers<-ld$getFollowers()
followers[sample.int(ld$followersCount, 1)]
setwd("d:\\sites/superbuild/blog/")
